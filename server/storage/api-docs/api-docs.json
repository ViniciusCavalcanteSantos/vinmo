{
    "openapi": "3.0.0",
    "info": {
        "title": "Vinmo API",
        "description": "Documentação da API do Vinmo",
        "version": "1.0.0"
    },
    "servers": [
        {
            "url": "http://localhost:8000",
            "description": "Servidor local"
        }
    ],
    "paths": {
        "/api/me": {
            "get": {
                "summary": "Current authenticated user",
                "description": "Retorna o usuário autenticado.",
                "operationId": "8367feff40ba10e43187792cad3132c1",
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "required": [
                                        "user"
                                    ],
                                    "properties": {
                                        "user": {
                                            "$ref": "#/components/schemas/User"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        }
    },
    "components": {
        "schemas": {
            "CityAreaAddress": {
                "required": [
                    "granularity",
                    "country",
                    "state",
                    "city"
                ],
                "properties": {
                    "granularity": {
                        "type": "string",
                        "enum": [
                            "city_area"
                        ],
                        "example": "city_area"
                    },
                    "countryName": {
                        "type": "string",
                        "example": "Brasil"
                    },
                    "country": {
                        "type": "string",
                        "example": "BR"
                    },
                    "stateName": {
                        "type": "string",
                        "example": "Pernambuco"
                    },
                    "state": {
                        "type": "string",
                        "example": "PE"
                    },
                    "city": {
                        "type": "string",
                        "example": "Recife"
                    }
                },
                "type": "object"
            },
            "FullAddress": {
                "required": [
                    "granularity",
                    "country",
                    "state",
                    "city",
                    "street",
                    "number",
                    "neighborhood"
                ],
                "properties": {
                    "granularity": {
                        "type": "string",
                        "enum": [
                            "full_address"
                        ],
                        "example": "full_address"
                    },
                    "countryName": {
                        "type": "string",
                        "example": "Brasil"
                    },
                    "country": {
                        "type": "string",
                        "example": "BR"
                    },
                    "stateName": {
                        "type": "string",
                        "example": "Pernambuco"
                    },
                    "state": {
                        "type": "string",
                        "example": "PE"
                    },
                    "city": {
                        "type": "string",
                        "example": "Recife"
                    },
                    "postalCode": {
                        "type": "string",
                        "example": "10001-1234"
                    },
                    "street": {
                        "type": "string",
                        "example": "Rua das Flores"
                    },
                    "number": {
                        "type": "string",
                        "example": "123"
                    },
                    "neighborhood": {
                        "type": "string",
                        "example": "Centro"
                    },
                    "complement": {
                        "type": "string",
                        "example": "Apto 201",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "Address": {
                "discriminator": {
                    "propertyName": "granularity",
                    "mapping": {
                        "city_area": "#/components/schemas/CityAreaAddress",
                        "full_address": "#/components/schemas/FullAddress"
                    }
                },
                "oneOf": [
                    {
                        "$ref": "#/components/schemas/CityAreaAddress"
                    },
                    {
                        "$ref": "#/components/schemas/FullAddress"
                    }
                ]
            },
            "ContractCategory": {
                "required": [
                    "name",
                    "slug"
                ],
                "properties": {
                    "name": {
                        "type": "string",
                        "example": "Formatura"
                    },
                    "slug": {
                        "type": "string",
                        "example": "formatura"
                    }
                },
                "type": "object"
            },
            "ClientProfileImage": {
                "required": [
                    "original",
                    "web",
                    "thumb"
                ],
                "properties": {
                    "original": {
                        "type": "string",
                        "format": "uri",
                        "example": "https://.../original.jpg"
                    },
                    "web": {
                        "type": "string",
                        "format": "uri",
                        "example": "https://.../web.jpg"
                    },
                    "thumb": {
                        "type": "string",
                        "format": "uri",
                        "example": "https://.../thumb.jpg"
                    }
                },
                "type": "object"
            },
            "ClientGuardian": {
                "required": [
                    "name",
                    "type"
                ],
                "properties": {
                    "name": {
                        "type": "string",
                        "example": "Maria da Silva"
                    },
                    "type": {
                        "type": "string",
                        "enum": [
                            "mother",
                            "father",
                            "grandmother",
                            "grandfather",
                            "uncle",
                            "aunt",
                            "sister",
                            "brother",
                            "godmother",
                            "godfather",
                            "other"
                        ],
                        "example": "mother"
                    },
                    "email": {
                        "type": "string",
                        "format": "email",
                        "example": "mae@example.com",
                        "nullable": true
                    },
                    "phone": {
                        "type": "string",
                        "example": "+55 81 99999-9999",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "Client": {
                "required": [
                    "id",
                    "profile",
                    "name",
                    "createdAt"
                ],
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 10
                    },
                    "code": {
                        "type": "string",
                        "example": "CLI-0001"
                    },
                    "name": {
                        "type": "string",
                        "example": "João dos Testes"
                    },
                    "profile": {
                        "$ref": "#/components/schemas/ClientProfileImage"
                    },
                    "birthdate": {
                        "type": "string",
                        "format": "date",
                        "example": "2015-03-25",
                        "nullable": true
                    },
                    "phone": {
                        "type": "string",
                        "example": "+55 81 98888-7777",
                        "nullable": true
                    },
                    "createdAt": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-11-06T12:00:00Z"
                    },
                    "address": {
                        "oneOf": [
                            {
                                "$ref": "#/components/schemas/FullAddress"
                            }
                        ],
                        "nullable": true
                    },
                    "guardian": {
                        "oneOf": [
                            {
                                "$ref": "#/components/schemas/ClientGuardian"
                            }
                        ],
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "Contract": {
                "required": [
                    "id",
                    "code",
                    "title",
                    "category",
                    "address",
                    "createdAt"
                ],
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "code": {
                        "type": "string",
                        "example": "CONT-0001"
                    },
                    "title": {
                        "type": "string",
                        "example": "Formatura 3º Ano 2025"
                    },
                    "createdAt": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-11-06T12:00:00Z"
                    },
                    "category": {
                        "$ref": "#/components/schemas/ContractCategory"
                    },
                    "address": {
                        "$ref": "#/components/schemas/CityAreaAddress"
                    },
                    "graduationDetails": {
                        "oneOf": [
                            {
                                "$ref": "#/components/schemas/GraduationDetails"
                            }
                        ],
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "EventType": {
                "required": [
                    "id",
                    "name",
                    "category"
                ],
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 3
                    },
                    "name": {
                        "type": "string",
                        "example": "Ensaio"
                    },
                    "category": {
                        "$ref": "#/components/schemas/ContractCategory"
                    }
                },
                "type": "object"
            },
            "Event": {
                "required": [
                    "id",
                    "contractId",
                    "eventDate",
                    "type",
                    "totalImages",
                    "totalSize",
                    "createdAt"
                ],
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 12
                    },
                    "contractId": {
                        "type": "integer",
                        "example": 5
                    },
                    "title": {
                        "type": "string",
                        "format": "date",
                        "example": "Salão Nobre – 13/12"
                    },
                    "eventDate": {
                        "type": "string",
                        "format": "date",
                        "example": "2025-11-06"
                    },
                    "startTime": {
                        "type": "string",
                        "format": "time",
                        "example": "14:30",
                        "nullable": true
                    },
                    "description": {
                        "type": "string",
                        "example": "Cobertura da formatura",
                        "nullable": true
                    },
                    "createdAt": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-11-06T12:00:00Z"
                    },
                    "contract": {
                        "oneOf": [
                            {
                                "$ref": "#/components/schemas/Contract"
                            }
                        ],
                        "nullable": true
                    },
                    "totalImages": {
                        "type": "integer",
                        "example": 120
                    },
                    "totalSize": {
                        "description": "bytes",
                        "type": "integer",
                        "example": 34567890
                    },
                    "type": {
                        "$ref": "#/components/schemas/EventType"
                    }
                },
                "type": "object"
            },
            "FaceCropMatch": {
                "required": [
                    "id",
                    "faceCropId",
                    "clientId",
                    "imageId",
                    "matchedBy",
                    "confidence"
                ],
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 2
                    },
                    "faceCropId": {
                        "type": "integer",
                        "example": 2
                    },
                    "clientId": {
                        "type": "integer",
                        "example": 18
                    },
                    "imageId": {
                        "type": "string",
                        "example": "01kabknvc1fy2cvgen915mb0t3"
                    },
                    "matchedBy": {
                        "type": "string",
                        "enum": [
                            "rekognition",
                            "manual"
                        ],
                        "example": "rekognition"
                    },
                    "confidence": {
                        "type": "number",
                        "format": "float",
                        "example": 99.97
                    },
                    "notes": {
                        "type": "string",
                        "example": null,
                        "nullable": true
                    },
                    "createdBy": {
                        "type": "integer",
                        "example": null,
                        "nullable": true
                    },
                    "aprovedBy": {
                        "type": "integer",
                        "example": null,
                        "nullable": true
                    },
                    "createdAt": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-11-18T13:50:17.000000Z"
                    },
                    "updatedAt": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-11-18T13:50:17.000000Z"
                    },
                    "faceCrop": {
                        "oneOf": [
                            {
                                "$ref": "#/components/schemas/FaceCrop"
                            }
                        ],
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "FaceCrop": {
                "required": [
                    "id",
                    "eventId",
                    "originalImageId",
                    "boxX",
                    "boxY",
                    "boxW",
                    "boxH",
                    "dismissed"
                ],
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 2
                    },
                    "eventId": {
                        "type": "integer",
                        "example": 90
                    },
                    "originalImageId": {
                        "type": "string",
                        "example": "01kabknvc1fy2cvgen915mb0t3"
                    },
                    "boxX": {
                        "type": "integer",
                        "example": 1388
                    },
                    "boxY": {
                        "type": "integer",
                        "example": 195
                    },
                    "boxW": {
                        "type": "integer",
                        "example": 440
                    },
                    "boxH": {
                        "type": "integer",
                        "example": 195
                    },
                    "bestClientId": {
                        "type": "integer",
                        "example": null,
                        "nullable": true
                    },
                    "bestConfidence": {
                        "type": "number",
                        "format": "float",
                        "example": null,
                        "nullable": true
                    },
                    "dismissed": {
                        "description": "0 para false, 1 para true",
                        "type": "integer",
                        "example": 0
                    },
                    "createdAt": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-11-18T13:50:17.000000Z"
                    },
                    "updatedAt": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-11-18T13:50:17.000000Z"
                    }
                },
                "type": "object"
            },
            "GraduationDetails": {
                "required": [
                    "type",
                    "institutionName",
                    "className",
                    "shift",
                    "conclusionYear"
                ],
                "properties": {
                    "type": {
                        "type": "string",
                        "enum": [
                            "university",
                            "school"
                        ],
                        "example": "university"
                    },
                    "institutionName": {
                        "type": "string",
                        "example": "Universidade Federal de Pernambuco"
                    },
                    "institutionAcronym": {
                        "type": "string",
                        "example": "UFPE",
                        "nullable": true
                    },
                    "className": {
                        "type": "string",
                        "example": "Turma 2025"
                    },
                    "shift": {
                        "type": "string",
                        "enum": [
                            "morning",
                            "afternoon",
                            "night",
                            "full_time"
                        ],
                        "example": "night"
                    },
                    "conclusionYear": {
                        "type": "integer",
                        "example": 2025
                    },
                    "universityCourse": {
                        "type": "string",
                        "example": "Sistemas de Informação",
                        "nullable": true
                    },
                    "schoolGradeLevel": {
                        "type": "string",
                        "enum": [
                            "elementary_school",
                            "middle_school",
                            "high_school"
                        ],
                        "example": "high_school",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "ImageMeta": {
                "description": "Metadados EXIF e técnicos da imagem",
                "properties": {
                    "camera": {
                        "properties": {
                            "make": {
                                "type": "string",
                                "example": "Canon"
                            },
                            "model": {
                                "type": "string",
                                "example": "Canon EOS 6D Mark II"
                            },
                            "lens": {
                                "type": "string",
                                "example": "EF85mm f/1.8 USM"
                            },
                            "software": {
                                "type": "string",
                                "example": "Adobe Lightroom Classic 14.5"
                            },
                            "capturedAt": {
                                "type": "string",
                                "example": "2025-08-03 21:30:33"
                            }
                        },
                        "type": "object"
                    },
                    "exposure": {
                        "properties": {
                            "exposureProgram": {
                                "type": "string",
                                "example": "1"
                            },
                            "exposureTime": {
                                "type": "string",
                                "example": "1/160"
                            },
                            "fNumber": {
                                "type": "string",
                                "example": "f/2.5"
                            },
                            "iso": {
                                "type": "integer",
                                "example": 320
                            },
                            "focalLength": {
                                "type": "string",
                                "example": "85mm"
                            },
                            "flash": {
                                "type": "integer",
                                "example": 9
                            }
                        },
                        "type": "object"
                    },
                    "location": {
                        "properties": {
                            "latitude": {
                                "type": "number",
                                "example": -8.3312
                            },
                            "longitude": {
                                "type": "number",
                                "example": -36.4201
                            }
                        },
                        "type": "object"
                    },
                    "other": {
                        "description": "Metadados adicionais não padronizados",
                        "type": "object"
                    }
                },
                "type": "object"
            },
            "URLs": {
                "properties": {
                    "original": {
                        "type": "string",
                        "format": "uri",
                        "example": "https://s3.amazonaws.com/bucket/image.jpg"
                    },
                    "web": {
                        "type": "string",
                        "format": "uri",
                        "example": "https://s3.amazonaws.com/bucket/image_webp.webp"
                    },
                    "thumb": {
                        "type": "string",
                        "format": "uri",
                        "example": "https://s3.amazonaws.com/bucket/image_thum_webp"
                    }
                },
                "type": "object"
            },
            "OriginalImageInfo": {
                "required": [
                    "name",
                    "size",
                    "width",
                    "height",
                    "mimeType"
                ],
                "properties": {
                    "name": {
                        "type": "string",
                        "example": "IMG_1234"
                    },
                    "size": {
                        "description": "Tamanho em bytes da imagem original (se houver)",
                        "type": "integer",
                        "example": 2456789,
                        "nullable": true
                    },
                    "width": {
                        "description": "Largura da imagem original",
                        "type": "integer",
                        "example": 1980
                    },
                    "height": {
                        "description": "Altura da imagem original",
                        "type": "integer",
                        "example": 1080
                    },
                    "mimeType": {
                        "type": "string",
                        "example": "image/jpeg"
                    }
                },
                "type": "object"
            },
            "Image": {
                "required": [
                    "id",
                    "url",
                    "type",
                    "size",
                    "mimeType",
                    "createdAt",
                    "updatedAt"
                ],
                "properties": {
                    "id": {
                        "type": "string",
                        "example": "01J5Q8V6WZ3QC4FJ0V5E5VQ7R9"
                    },
                    "url": {
                        "type": "string",
                        "format": "uri",
                        "example": "https://s3.amazonaws.com/bucket/image.jpg"
                    },
                    "urls": {
                        "$ref": "#/components/schemas/URLs"
                    },
                    "type": {
                        "description": "Versão da imagem (ex: original, web, thumb)",
                        "type": "string",
                        "example": "original"
                    },
                    "size": {
                        "description": "Tamanho em bytes",
                        "type": "integer",
                        "example": 2456789
                    },
                    "width": {
                        "description": "Largura da imagem",
                        "type": "integer",
                        "example": 1980
                    },
                    "height": {
                        "description": "Altura da imagem",
                        "type": "integer",
                        "example": 1080
                    },
                    "mimeType": {
                        "type": "string",
                        "example": "image/jpeg"
                    },
                    "original": {
                        "$ref": "#/components/schemas/OriginalImageInfo"
                    },
                    "createdAt": {
                        "type": "string",
                        "example": "2025-11-06 10:15:00"
                    },
                    "updatedAt": {
                        "type": "string",
                        "example": "2025-11-06 10:20:00"
                    },
                    "clientsOnImageCount": {
                        "description": "Quantidade de clientes detectados na imagem",
                        "type": "integer",
                        "example": 3,
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "User": {
                "required": [
                    "id",
                    "name",
                    "email",
                    "address"
                ],
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "name": {
                        "type": "string",
                        "example": "Vinicius"
                    },
                    "email": {
                        "type": "string",
                        "example": "vinicius@example.com"
                    },
                    "picture": {
                        "type": "string",
                        "format": "uri",
                        "example": "https://.../picture.jpg",
                        "nullable": true
                    },
                    "address": {
                        "$ref": "#/components/schemas/FullAddress"
                    }
                },
                "type": "object"
            }
        }
    }
}